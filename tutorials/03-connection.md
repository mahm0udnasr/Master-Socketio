# عملية فتح الاتصال مع Socket.io

ركز معايا علشان ده أهم جزء في الشرح، وهي عملية فتح السيرفر من خلال **Socket.io**.  

شكل الكود بتاع عملية الاتصال اللي بيتكتب بيكون بالشكل ده:

```js
io.on('connection', callback) 
```

لو مذاكر **Node.js** المفروض تكون فاهم الكود ده حتى لو بشكل بسيط، نرجع للموضوع الأساسي بقى.

الـ `io` هنا بيمثل السيرفر الرئيسي اللي بنعمل منه الاتصال. يعني أقدر أقولك إننا بنسجل منه حدث الاتصال بشكل بسيط.

خليني أشرح لك إيه الكود هيعمله:  
أول ما السيرفر يشتغل، الـ `Socket.io` هيشتغل وينفذ الفانكشن الـ `callback`، ووقتها نقدر نتحكم في حاجات كتير. خلينا نبدأ في الكود علشان يكون الموضوع واضح أكتر.

```js
io.on("connection", (client) => {
  console.log("A user connected");
  console.log(client);
});
```

ده كود لعملية اتصال من خلال **Socket.io** في السيرفر (الجانب الخلفي أو الـ Back-End). لسه ما عملناش اتصال من جانب العميل (Client-Side).  
لو كتبت الكود ده بس، مش هتلاقي إن حاجة اشتغلت. طيب، هتعمل إيه؟

هتدخل على ملف **index.html** وهنعرف فيه الـ `Socket.io` من خلال الكود ده:

```html
<script src="/socket.io/socket.io.js"></script>
```

وخد بالك إنك لو شغال في مشروع تاني لوحده، هتحتاج إنك تنزل المكتبة أو تجيبها من خلال **CDN**.

وبعد كده، هنعمل عملية الاتصال من الـ client وهيكون في ملف الـ HTML برضو:

```html
<script type="module">
  const socket = io();
  socket.on("connect", () => {
    console.log("Connected to client");
  });
</script>
```

بكده نكون عملنا عملية الاتصال، وممكن تتابع الاتصال من خلال الـ **console** في السيرفر أو المتصفح.

خلينا دلوقت ندخل علي عمليه قطع الاتصال من سيرفر `socket.io`